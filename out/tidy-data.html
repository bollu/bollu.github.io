<!DOCTYPE html><meta charset='UTF-8'><html><head><link rel='alternate' type='application/rss+xml' href='feed.rss' title='A universe of sorts'/><link rel='stylesheet' href='katex/katex.min.css'    integrity='sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X'    crossorigin='anonymous'><!-- The loading of KaTeX is deferred to speed up page rendering --><link rel='stylesheet' href='prism/prism.css'><title> A Universe of Sorts </title><style>@font-face {font-family: 'Blog Mono'; src: url('/static/iosevka-fixed-extended.ttf');}@font-face {font-family: 'Blog Sans'; src: url('/static/Exo2-Regular.ttf');}@font-face {font-family: 'Blog Serif'; src: url('/static/Revans-Regular.ttf');}html { font-size: 100%; }html,body { text-size-adjust: none; -webkit-text-size-adjust: none; -moz-text-size-adjust: none; -ms-text-size-adjust: none; } body { line-height: 1.5em;  color: #000000;  font-family: serif;  font-size: 12px;  margin-top: 0px;  max-width: 100%; overflow-x: hidden; }
h1, h2, h3, h4, h5 { font-family: 'Blog Mono', monospace; }h1, h2 { column-span: all; }img { display:block; width: 100%; max-width: 800px; height: auto }.container { overflow-x: auto; overflow-y: hidden;              margin-top: 0px; height: 100%; min-height: 100%;             max-width: 100%;              font-size: 18px; line-height: 1.5em;              column-count: auto; column-width: 25em; column-fill: auto;              padding-left: 30px; padding-right: 30px; background: #FFFFFF;}@media (max-width: 480px) {   .container { margin-left: 1%; margin-right: 1%; }  body { font-size: 30px; }  } @media (max-width: 1024px) {  .container { margin-left: 1%; margin-right: 1%; }  body { font-size: 30px; }}@media (min-width: 1024px) { .container { margin-left: 1%; margin-right: 1%; } }.image { }
a:hover { color: #1a73e8; text-decoration: underline;  }
a { color: #1a73e8; text-decoration: none; }
a:visited { color: #1a73e8; text-decoration: none; }
a:active { color: #1a73e8; text-decoration: none; }

blockquote { margin-left: 0px; margin-right: 0px; } pre, .latexblock, blockquote { border-left-color:#BBB;  border-left-style: solid;      border-left-width: 5px; }pre, blockquote { padding-left: 10px; }
pre { font-family: 'Blog Mono', monospace; font-size: 90%;  }pre {  overflow-x: auto; }.latexblock, blockquote, pre { margin-top: 10px; margin-bottom: 10px; padding-bottom: 5px; padding-top: 5px; background-color: #FFFFFF; }.latexblock { line-height: 1em }
pre, kbd, samp, tt{ font-family:'Blog Mono',monospace; }.inline { white-space: nowrap; background:#efefef; }ul, ol { list-style-position: inside; padding-left: 0; }ul { list-style-type: disclosure-closed; }</style></head><body><div class='container'><h2><a id=tidy-data href='#tidy-data'> § </a><span class='centered'> Tidy Data </h2> 
 <ul><li><span class='centered'><span class='centered'>  <a href=http://vita.had.co.nz/papers/tidy-data.pdf><span class='centered'>The paper </a></li></ul> 
 <ul><li><span class='centered'><span class='centered'> Tidy data is a standard way of mapping the meaning of a dataset to its structure. A dataset is <span class='centered'>messy or tidy depending on how rows, columns and tables are matched up with observations, <span class='centered'>variables and types. In tidy data: </li></ul> 
 <blockquote><span class='centered'> 1. Each variable forms a column. <span class='centered'> 2. Each observation forms a row. <span class='centered'> 3. Each type of observational unit forms a table. </blockquote> 
 <blockquote><span class='centered'> While the order of variables and observations does not affect analysis, a good ordering makes <span class='centered'> it easier to scan the raw values. One way of organising variables is by their role in the analysis: <span class='centered'> are values fixed by the design of the data collection, or are they measured during the course of <span class='centered'> the experiment? Fixed variables describe the experimental design and are known in advance. <span class='centered'> Computer scientists often call fixed variables dimensions, and statisticians usually denote them <span class='centered'> with subscripts on random variables. Measured variables are what we actually measure in the <span class='centered'> study. Fixed variables should come first, followed by measured variables, each ordered so that <span class='centered'> related variables are contiguous. Rows can then be ordered by the first variable, breaking <span class='centered'> ties with the second and subsequent (fixed) variables. This is the convention adopted by all <span class='centered'> tabular displays in this paper. </blockquote> 
 <h4><a id=messy-1-column-headers-are-values-not-variable-names href='#messy-1-column-headers-are-values-not-variable-names'> § </a><span class='centered'> Messy 1: Column headers are values, not variable names </h4> 
 <ul><li><span class='centered'><span class='centered'> eg. columns are  <code class='inline'>religion |<$10k |$10-20k |$20-30k |$30-40k |$40-50k |$50-75k</code>. </li><li><span class='centered'><span class='centered'> melt dataset to get  <code class='inline'>molten</code> stacked data. </li></ul> 
 <h4><a id=messy-2-multiple-variables-stored-in-one-column href='#messy-2-multiple-variables-stored-in-one-column'> § </a><span class='centered'> Messy 2: Multiple variables stored in one column </h4> 
 <ul><li><span class='centered'><span class='centered'> This often manifests  <i><span class='centered'>after </i> melting. </li><li><span class='centered'><span class='centered'> eg. columns are  <code class='inline'>country | year | m014 | m1524 | .. | f014 | f1524...</code></li><li><span class='centered'><span class='centered'> columns represent  <i><span class='centered'>both </i> sex  <i><span class='centered'>and </i> age ranges. After metling, we get a single column  <code class='inline'>sexage</code> with entries like  <code class='inline'>m014</code> or  <code class='inline'>f1524</code></li><li><span class='centered'><span class='centered'> The data is still  <i><span class='centered'>molten </i>, so we should reshape it before it sets into tidy columnlar data. We do this by splitting the column into two, <span class='centered'>one for  <code class='inline'>age</code> and one for  <code class='inline'>sex</code>. </li></ul> 
 <h4><a id=messy-3-variables-are-stored-in-both-rows-and-columns href='#messy-3-variables-are-stored-in-both-rows-and-columns'> § </a><span class='centered'> Messy 3: Variables are stored in both rows and columns </h4> 
 <ul><li><span class='centered'><span class='centered'> Original data: </li></ul> 
 <pre><code>id      year month element d1 d2 d3 d4 d5 ...
MX17004 2010 1     tmax    — — — — — — — —
MX17004 2010 1     tmin    — — — — — — — —
MX17004 2010 2     tmax    — 27.3 24.1 — — — — —
MX17004 2010 2     tmin    — 14.4 14.4 — — — — —
MX17004 2010 3     tmax    — — — — 32.1 — — —
MX17004 2010 3     tmin    — — — — 14.2 — — —
MX17004 2010 4     tmax    — — — — — — — —
MX17004 2010 4     tmin    — — — — — — — —
MX17004 2010 5     tmax    — — — — — — — —
MX17004 2010 5     tmin    — — — — — — — —
</code></pre> 
 <ul><li><span class='centered'><span class='centered'> Some variables are in individual columns (id, year, month) </li><li><span class='centered'><span class='centered'> Some variables are spread across columns (day is spread as d1–d31) </li><li><span class='centered'><span class='centered'> Some variables are smearted across rows (eg.  <code class='inline'>tmax/tmin</code>). TODO: what does this mean, really? </li><li><span class='centered'><span class='centered'> First, tidy by collating into  <code class='inline'>date</code>: </li></ul> 
 <pre><code>id      date       element value
MX17004 2010-01-30 tmax 27.8
MX17004 2010-01-30 tmin 14.5
MX17004 2010-02-02 tmax 27.3
MX17004 2010-02-02 tmin 14.4
MX17004 2010-02-03 tmax 24.1
MX17004 2010-02-03 tmin 14.4
MX17004 2010-02-11 tmax 29.7
MX17004 2010-02-11 tmin 13.4
MX17004 2010-02-23 tmax 29.9
MX17004 2010-02-23 tmin 10.7
</code></pre>
 <ul><li><span class='centered'><span class='centered'> Dataset above is still molten. Must reshape along  <code class='inline'>element</code> to get two columns for  <code class='inline'>max</code> and  <code class='inline'>min</code>. This gives: </li></ul> 
 <pre><code>id      date       tmax tmin
MX17004 2010-01-30 27.8 14.5
MX17004 2010-02-02 27.3 14.4
MX17004 2010-02-03 24.1 14.4
MX17004 2010-02-11 29.7 13.4
MX17004 2010-02-23 29.9 10.7
MX17004 2010-03-05 32.1 14.2
MX17004 2010-03-10 34.5 16.8
MX17004 2010-03-16 31.1 17.6
MX17004 2010-04-27 36.3 16.7
MX17004 2010-05-27 33.2 18.2
</code></pre> 
 <ul><li><span class='centered'><span class='centered'> Months with less than 31 days have structural missing values for the last day(s) of the month. </li><li><span class='centered'><span class='centered'> The element column is not a variable; it stores the names of variables. </li></ul> 
 <h4><a id=multiple-types-in-one-table href='#multiple-types-in-one-table'> § </a><span class='centered'> Multiple types in one table: </h4> 
 <h4><a id=data-manipulation-relationship-to-dplyr href='#data-manipulation-relationship-to-dplyr'> § </a><span class='centered'> data manipulation, relationship to  <code class='inline'>dplyr</code>: </h4> 
 <ul><li><span class='centered'><span class='centered'>  <a href=https://r4ds.had.co.nz/transform.html><span class='centered'>Data transformation in R for data science </a></li><li><span class='centered'><span class='centered'>  <code class='inline'>mutate()</code> adds new variables that are functions of existing variables </li><li><span class='centered'><span class='centered'>  <code class='inline'>select()</code> picks variables based on their names. </li><li><span class='centered'><span class='centered'>  <code class='inline'>filter()</code> picks cases based on their values. </li><li><span class='centered'><span class='centered'>  <code class='inline'>summarise()</code> reduces multiple values down to a single summary. </li><li><span class='centered'><span class='centered'>  <code class='inline'>arrange()</code> changes the ordering of the rows. </li></ul> 
 <h4><a id=visualization href='#visualization'> § </a><span class='centered'> Visualization </h4> 
 <ul><li><span class='centered'><span class='centered'> Most of R's visualization ecosystem is tidy by default. </li><li><span class='centered'><span class='centered'> base  <code class='inline'>plot</code>,  <code class='inline'>lattice</code>,  <code class='inline'>ggplot</code> are all tidy. </li></ul> 
 <h4><a id=modelling href='#modelling'> § </a><span class='centered'> Modelling </h4> 
 <ul><li><span class='centered'><span class='centered'> Most modelling tools work best with tidy datasets. </li></ul> 
 <h4><a id=questions-about-performance-benching-in-terms-of-tidy href='#questions-about-performance-benching-in-terms-of-tidy'> § </a><span class='centered'> Questions about performance benching in terms of tidy </h4>
 <ul><li><span class='centered'><span class='centered'> Is runs of a program at different performance levels like  <code class='inline'>O1</code>,  <code class='inline'>O2</code>,  <code class='inline'>O3</code> to be stored as <span class='centered'>separate columns? Or as a categorical column called "optimization level" with <span class='centered'>entries stored in separate rows of  <code class='inline'>O1</code>,  <code class='inline'>O2</code>,  <code class='inline'>O3</code>? </li><li><span class='centered'><span class='centered'> If we go by the tidy rule "Each variable forms a column", then this suggests that  <code class='inline'>optimization level</code> is a variable. </li><li><span class='centered'><span class='centered'> Then the tidy rule  <code class='inline'>Each observation forms a row.</code> makes us use rows like  <code class='inline'>[foo.test | opt-level=O1 | <runtime>]</code> and  <code class='inline'>[foo.test | opt-level=O2 | <runtime>]</code>. </li><li><span class='centered'><span class='centered'> Broader question: what is the tidy rule for categorical column? </li><li><span class='centered'><span class='centered'> However, in the tidy data paper, Table 12, it is advocated to have two columns for  <code class='inline'>tmin</code> and  <code class='inline'>tmax</code> instead of having a column called  <code class='inline'>element</code> with <span class='centered'>choices  <code class='inline'>tmin</code>,  <code class='inline'>tmax</code>. So it seems to be preferred that if one has a categorical variable, we make its observations into columns. </li><li><span class='centered'><span class='centered'> This suggests that I order my bench data as  <code class='inline'>[foo.test | O1-runtime=_ | O2-runtime=_ | O3-runtime=_ ]</code>. </li></ul> 
 <script src="https://utteranc.es/client.js"        repo="bollu/bollu.github.io"        issue-term="pathname"        label="question"        theme="github-light"        crossorigin="anonymous"        async></script></container></body></html>